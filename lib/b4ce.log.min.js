!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore"],b):(a.B4ce||(a.B4ce={}),a.B4ce.Log||(a.B4ce.Log={}),a.B4ce.Log.Util=b(a._))}(this,function(a){"use strict";return{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},createMethod:function(b,c){var d=b;return"common"===b?function(){var e=Array.prototype.slice.call(arguments,arguments);return d=a.isArray(e[0])||a.isNumber(e[0])?e.shift():[b],this.logMessage(d,c,e)}:function(){var a=Array.prototype.slice.call(arguments,arguments);return this.logMessage([d],c,a)}},extend:function(b,c){var d,e=this;d=b&&a.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)},a.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,b&&a.extend(d.prototype,b),d.__super__=e.prototype,d},sanitizeBrowser:function(){Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError("this is null or not defined");var e=Object(this),f=e.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(b&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Function.prototype.bind&&Array.prototype.forEach&&"object"==typeof console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]&&(console[a]=this.bind(console[a],console))},Function.prototype.call)}}}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore","./b4ce.log.util"],b):(a.B4ce||(a.B4ce={}),a.B4ce.Log||(a.B4ce.Log={}),a.B4ce.Log.Channel=b(a._,a.B4ce.Log.Util))}(this,function(a,b){"use strict";var c=function(b){a.extend(this,b)};return c.extend=b.extend,a.extend(c.prototype,{filter:function(b,c){return this.level&&this.log.levels[c]<this.log.levels[this.level]?!1:!(this.categories&&!a.intersect(this.categories,b).length)},timestamp:function(){return(new Date).toISOString()},prefix:function(b,c,d){var e,f=[];return(e=this.timestamp(b,c,d))&&f.push(e),f.push(c.toUpperCase()),e=a.without(b,"common"),e.length&&f.push(" ["+e.join(",")+"]"),f.join(" ")+":"},format:function(a,b,c){return this.prefix(a,b,c)+" "+c.join(" ")},write:function(){throw"Channel.write has to be overriden by actual channel implementation!"}}),c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore","./b4ce.log.channel"],b):(a.B4ce||(a.B4ce={}),a.B4ce.Log||(a.B4ce.Log={}),a.B4ce.Log.Channel||(a.B4ce.Log.Channel={}),a.B4ce.Log.Channel.Alert=b(a._,a.B4ce.Log.Channel))}(this,function(a,b){"use strict";var c=b.extend({constructor:function(c){c=a.extend({level:"alert"},c),b.call(this,c)},filter:function(a,c,d){return void 0===window.alert?!1:b.prototype.filter.call(this,a,c,d)},timestamp:function(){return null},write:function(a,b,c){window.alert(this.format(a,b,c))}});return c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore","./b4ce.log.channel"],b):(a.B4ce||(a.B4ce={}),a.B4ce.Log||(a.B4ce.Log={}),a.B4ce.Log.Channel||(a.B4ce.Log.Channel={}),a.B4ce.Log.Channel.Console=b(a._,a.B4ce.Log.Channel))}(this,function(a,b){"use strict";var c=b.extend({filter:function(a,c,d){return"object"!=typeof console||"function"!=typeof console.log?!1:b.prototype.filter.call(this,a,c,d)},format:function(a,b,c){return[this.prefix(a,b,c)].concat(c)},write:function(a,b,c){var d,e=this.log.levels[b];return d=e>=this.log.levels.err?console.error:e>=this.log.levels.warning?console.warn:console.log,d.apply(console,this.format(a,b,c)),this}});return c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery","./b4ce.log.channel"],b):(a.B4ce||(a.B4ce={}),a.B4ce.Log||(a.B4ce.Log={}),a.B4ce.Log.Channel||(a.B4ce.Log.Channel={}),a.B4ce.Log.Channel.HTML=b(a.jQuery,a.B4ce.Log.Channel))}(this,function(a,b){"use strict";var c=a('<div class="log-entry"></div>'),d=b.extend({constructor:function(c){b.call(this,c),this.$el=a(c.selector)},filter:function(a,c,d){return this.$el?b.prototype.filter.call(this,a,c,d):!1},write:function(a,b,d){return this.$el.append(c.clone().addClass([b].concat(a).join(" ")).text(this.format(a,b,d))),this}});return d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["underscore","./b4ce.log.util","./b4ce.log.channel","./b4ce.log.channel.alert","./b4ce.log.channel.console"],b):a.B4ce.Log=b(a._,a.B4ce.Log.Util,a.B4ce.Log.Channel,a.B4ce.Log.Channel.Alert,a.B4ce.Log.Channel.Console)}(this,function(a,b,c,d,e){"use strict";b.sanitizeBrowser();var f=["debug","info","notice","warning","err","crit","alert","emerg"],g=0,h={};a.each(f,function(a){h[a]=++g});var i={alert:d,console:e},j=function(b){if(a.isUndefined(b))b={};else if(!a.isObject(b))throw new Error("invalid options: "+JSON.stringify(b));b.defaultLevel&&(this.defaultLevel=this.sanitizeLevel(b.defaultLevel)),this.categories={common:1},this.categoryLevel={common:void 0},this.categoryValMax=this.categories.common,b.categories&&this.addCategories(b.categories),this.channels={},a.isUndefined(b.channels)?this.addChannels(i):this.addChannels(b.channels),this.createCategoryMethods()};return a.extend(j,{Util:b,Channel:c}),a.each(h,function(a,b){j[b.toUpperCase()]=a}),a.extend(j.prototype,{levels:h,defaultLevel:"debug",addCategory:function(a,b){return this.categories[a]||(this.categoryValMax*=2,this.categories[a]=this.categoryValMax),this.categoryLevel[a]=this.sanitizeLevel(b),this},addCategories:function(b){var c=this;if(a.isObject(b))a.each(b,function(a,b){c.addCategory(b,a)});else{if(!a.isArray(b))throw new Error("categories is neither object nor array!");a.each(b,function(a){c.addCategory(a)})}return this},addChannel:function(b,d){if(this.channels[b])throw new Error("Channel name already registered: "+b);if(d instanceof c)d.log=this,this.channels[b]=d;else if(a.isFunction(d))this.channels[b]=new d({log:this});else if(a.isFunction(i[b])){if(d===!1)return this;var e={log:this};a.isObject(d)&&a.extend(e,d),this.channels[b]=new i[b](e)}return this},addChannels:function(b){var c=this;if(!a.isObject(b))throw new Error("channels is neither object nor array!");return a.each(b,function(a,b){c.addChannel(b,a)}),this},setLevel:function(a,b){var c;if(a=a&&""!==a?this.sanitizeLevel(a):void 0,void 0===b){void 0===a?a=this.defaultLevel:this.defaultLevel=a;for(c in this.categoryLevel)this.categoryLevel.hasOwnProperty(c)&&(this.categoryLevel[c]=a)}else{if(!this.categoryLevel.hasOwnProperty(b))throw"Invalid category: "+b;this.categoryLevel[b]=a}return this},createCategoryMethods:function(c){var d;if(a.isUndefined(c))d=a.keys(this.categories);else{if(!this.categories[c])throw new Error("invalid category: "+JSON.stringify(c));d=[c]}var e=this;return a.each(d,function(c){a.each(h,function(a,d){var f;f="common"===c?d:c+b.capitalize(d),void 0!==e[f]?e.logMessage(e.categories.common,e.levelMap.info,'Cannot create log method "'+f+'"'):e[f]=b.createMethod(c,d)})}),this},sanitizeCategories:function(b){var c,d,e,f=[];if(a.isArray(b)){for(d=0,e=b.length;e>d;d+=1)if(!this.categories.hasOwnProperty(b[d]))throw"Invalid category: "+b[d];f=b.slice()}else{if(!a.isNumber(b))throw"Invalid categories argument: "+b;for(c in this.categories)this.categories.hasOwnProperty(c)&&this.categories[c]&b&&(f.push(c),b-=this.categories[c]);if(b>0)throw"Invalid numeric category value: "+b}return f},sanitizeLevel:function(b){if(a.isUndefined(b))return b;if(a.isString(b)){if(!this.levels.hasOwnProperty(b))throw"Invalid string level: "+b;return b}if(a.isNumber(b)){var c;for(c in this.levels)if(this.levels.hasOwnProperty(c)&&b===this.levels[c])return c;throw"Invalid numeric level: "+b}throw"Invalid level: "+b},logMessage:function(a,b,c){var d,e,f,g,h,i,j=[];for(a=this.sanitizeCategories(a),b=this.sanitizeLevel(b),e=0,f=a.length;f>e;e+=1)d=a[e],this.levels[b]>=this.levels[this.categoryLevel[d]||this.defaultLevel]&&j.push(d);if(!j.length)return this;for(d in this.channels)this.channels.hasOwnProperty(d)&&(g=this.channels[d],h=!0,i=j,g.filter(j,b,c)&&g.write(j,b,c));return this}}),j});